# Shopify Backend Developer Challenge

This repository implements REST APIs connecting to the backend code base of an inventory tracking web application meant for a logistics company. 

**Additional feature**: Ability to create “shipments” and assign inventory to the shipment, and adjust inventory appropriately

## Build

### Requirements

The web server will be hosted on your local host. In order to run the APIs, all you need to install is [Docker Engine](https://docs.docker.com/engine/install/) and [Docker Compose](https://docs.docker.com/compose/install/).

### Run

Ensure that your docker engine is running. From the top level directory of this git repository run the following command.

``` 
PORT=4200 docker-compose up -d
```

This starts the application at port 4200. You may choose to use any port you wish by changing the value of `PORT` in the above command.

To stop the application:
```
PORT=4200 docker-compose down
```


## API Information

### API Endpoints

| Resource                  | POST                    | GET                           | PUT                                     | PATCH             | DELETE  |
| ------------------------- |:-------------:| -----:| -----:| -----:| -----:|
| /inventory                | Creates a new inventory | Retrieves all inventories     | Bulk updates inventory                  | Not yet developed | Deletes all inventories |
| /inventory/{inventory_id} | Error (Not supported)   | Retrieves a specific inventory| Updates details of a specific inventory | Partially updates details of a specific inventory | Deletes a specific inventory |
| /shipments                | Creates a new shipment  | Retrieves all shipments       | Not yet developed                       | Not yet developed | Not yet developed |
| /shipments/{shipment_id}  | Error (Not supported)   | Retrieves a specific shipment | Not yet developed                       | Not yet developed | Deletes a specific shipment |

### Entity

#### Inventory

An Inventory document has the following fields:
* _id: MongoDB autogenerated id
* name: string
* date_created: string
* description: string
* price: number
* units_remaining: integer

#### Shipment

A Shipment document has the following fields:
* _id: MongoDB autogenerated id
* description: string
* date_created: string
* from: string
* to: string
* completed: boolean
* inventory_items: array

`Note`: Date string must be given in [ISO 8601 format](https://en.wikipedia.org/wiki/ISO_8601).

## Sample Usage

Assumes that the application is running on port `4200`.

### Add a new inventory

```
curl -X POST -H "Content-Type: application/json" http://localhost:4200/inventory \
     -d '{"name": "Mango", "date_created": "2022-01-19T18:20:39+00:00", "description": "Summer fruit", "price": 2.35, "units_remaining": 30}'
```

Output:
```
{
    "_id": "61e86dcf13efb0f523fae17b"
}
```

Notes:
* _id in the output is subject to change

### Get a specific inventory

```
curl -X GET http://localhost:4200/inventory/61e86dcf13efb0f523fae17b
```

Output:
```
{
    "_id": {
        "$oid": "61e86dcf13efb0f523fae17b"
    },
    "name": "Mango",
    "date_created": {
        "$date": "2022-01-19T18:20:39Z"
    },
    "description": "Summer fruit",
    "price": 2.35,
    "units_remaining": 30
}
```

Notes: 
* inventory_id in the request URL is subject to change.

### Update a specific inventory

```
curl -X PUT -i -H "Content-Type: application/json" http://localhost:4200/inventory/61e86dcf13efb0f523fae17b \
     -d '{"name": "Orange", "date_created": "2022-01-19T18:20:39+00:00", "description": "Summer fruit", "price": 1.99, "units_remaining": 50}'
```

Output:
```
{
    "_id": {
        "$oid": "61e86dcf13efb0f523fae17b"
    },
    "name": "Orange",
    "date_created": {
        "$date": "2022-01-19T18:20:39Z"
    },
    "description": "Summer fruit",
    "price": 1.99,
    "units_remaining": 50
}
```

Notes:
* You are required to give all the fields of the Inventory document to use the PUT route. For partial update, use PATCH.
* inventory_id in the request URL is subject to change.

### Partially update a specific inventory

```
curl -i -X PATCH -H "Content-Type: application/json" http://localhost:4200/inventory/61e86dcf13efb0f523fae17b \
     -d '{"price": 3.99}'
```

Output:
```
{
    "_id": {
        "$oid": "61e86dcf13efb0f523fae17b"
    },
    "name": "Orange",
    "date_created": {
        "$date": "2022-01-19T18:20:39Z"
    },
    "description": "Summer fruit",
    "price": 3.99,
    "units_remaining": 50
}
```

Notes: 
* inventory_id in the request URL is subject to change.

### Add a new shipment

```
curl -i -X POST -H "Content-Type: application/json" http://localhost:4200/shipments \
     -d '{"description": "Sample shipment 1", "date_created": "2022-01-19T20:20:39+00:00", "from": "Sample from address", "to": "Sample to address", "completed": false, "inventory_items": [{"inventory_id": "61e86dcf13efb0f523fae17b", "units": 5}]}'
```

Output: 
```
{
    "_id": "61e878d9d574222525a96cb9"
}
```

Notes: 
* You need to provide a valid inventory_id the `inventory_items` field of the request data.
* Shipment _id in the output is subject to change.

### Get a specific shipment

```
curl -X GET http://localhost:4200/shipments/61e878d9d574222525a96cb9
```

Output:
```
{
    "_id": {
        "$oid": "61e878d9d574222525a96cb9"
    },
    "description": "Sample shipment 1",
    "date_created": {
        "$date": "2022-01-19T20:20:39Z"
    },
    "from": "Sample from address",
    "to": "Sample to address",
    "completed": false,
    "inventory_items": [
        {
            "inventory_id": "61e86dcf13efb0f523fae17b",
            "units": 5
        }
    ]
}
```

Notes:
* Shipment id in the request URL is subject to change.

### Delete a specific shipment

```
curl -X DELETE http://localhost:4200/shipments/61e878d9d574222525a96cb9
```

Notes:
* Shipment id in the request URL is subject to change.
